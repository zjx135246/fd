/**
 *  海底捞签到    vx小程序   
 *  
 *  抓  /api/gateway/login/center/login/wechatLogin   body里的 openId、uid
 *    
 *  定时一天一次           
 *  ========= 青龙--配置文件 =========
 *  变量格式: export haiditoken=" openId & uid "         记得删除格式中的空格 多个账号换行 或用 @ 分割
 *  9-16       仅签到
 *  有人写过，重写了一下，只是为了方便自己
 *  感谢Lilac群主指导
  cron：20 11 12 * * *
 */
const $ = new Env("海底捞");
var _0xod9='jsjiami.com.v6',_0xod9_=['‮_0xod9'],_0x4ced=[_0xod9,'BFFpBsOfUA==','worCu8Ku','Ug/DvBPDkQ==','w6d4w5J/w6I=','wrZBTMKmXQ==','w7toQmZ/','w4/Dr3TDpXw=','wrblpIzotpPkuq/CtOitvOepmuWSuuWyh+isiUp+','w5PDi0vDj1g=','wqLCv8KIZsKu','VMKrw74lw78=','FMKjG8Oawq0=','w5fovKrlm55uwobDhDLDqMO/wrhRwq4WwpIUwolnUsK9w47Cmg==','NXI7','IQLCjMOmw4c=','w793Uzod','FsKGw7zDo8KROMKLOw==','ezfDggQ=','Sxwnb8KO','wpc844CkCh0ow5c644KIScOPdsKnw6oQTyrDtETChxjCuiENw5jovJHmmLvCqA==','woDDqcKj','dFUfwpLCug==','E8KIBMOswq4=','wqnDuijClGU=','woTCjsO4wpvCuw==','wpRSw5jDoV8=','w73CreesieWIjeWnm+i3rA==','Fui8lOWZh+aUgeaPtBdFw77CmcOOEwEpw5xWw6ssw4xO','wrrDsAQ=','wrpNw4w=','w63DumXCksKp6KW15py05ZOy5pWz5o6iw55UDcO2wo/Dk8KgwrIcw5DCr8Kt','w60geQ==','wpsfw4DDkiE=','wqLlpJPotYTkuIjCq+isu+eqt+WSjOWyj+iticORw70=','buWkgei3suS6tMOJ6K+r56uM5ZKP5bC46K2SbcK9','wpvCuHkbw6RIwrbCosOWMA==','wrjDqAHCmGA1aTrCtcO2J8KoLMK8w6l2w6HCpMKzQk/DoRQlw4UKwrcVwrc=','LcOWPg==','AsOef8KRwrPDogLDjTnlhpfmirnli5NA','w5Ikw4/Cp8K8CA==','wpnkuobotIXljb4rwqotw73CgjLCucKiw5fCp2o=','wqthBcK95YaH5om95YmFCg==','w7F5WgkMIg==','w7bkurXotYXljLDDmF/Dpw==','PTF9w4E9wo/CrDjDvMOr','wo5sw7zDo2o=','NBjCig==','w4DCkcKjw5fDhg==','wqxZw4HDjkzDpQ==','wrQzLArCn8ObaEgVwqnDgw==','HjnCiWrCvQ==','wrDDqsOww7Bw','wqDkuJbotpzljL3jg4NzIFs=','wqk2w54=','ccOve8Kkw5LDoMKxckNv5b+w5aaP44Go56ySwpE=','w63kurrotLDljIrjg5bCu8KJw5Euw6HDjkQdw6s=','w6RINsONw7g=','44G9LcKAYcK8wpbjgInDo+i/huaZveS8meevnGc=','wqHotanlj6nkvpfmg4HCnXg=','E3svw7bCsA==','NVAdw6jClQ==','w6Ndw47CqcK6','L1s/wpVffg==','AsODf8KRwrPlv5/lp7TDkDnDm8O6w55dw4U=','w4fCsDbDncOnwrbCmcOB5byD5aSHw4NUDQ==','wrsxw6HDtQ==','w7nDvhPCrsOKBcK7wqMqw7TCp8KJFMK0w7rClcK0LMKDw5HCusOtCcOJIEDCucKtw5nCvTzDicK4HhRxw5nDpcKgaiJtwps=','wqwqAA==','w7VIw5zDp8Oq','wpHDn8KzSXDDu8K0wq/DskRlMMK8w6TDo2o=','5L2F5ZO75bK556q15buo','w6Blw7xaw7c=','RBDnmqzlvafmi7jlioM=','aiDDjALDrA==','woc2w5HDhCU=','aMOJ55uU5b+C5aeS6LW0','wp3Dn0XCqQ==','AcKfe8ORfcOKwoPDq8Odwp1pw4HCssKnHxggcmJ+P8OXL8K2MMK3wpJxw4wJT8Oew4PCpMORw6UGw4s6dRbDjRk=','wp4Kw5TCjHw=','w4krwpgtM8K2CSpwwqg=','5LqT5LiW5L+C5oOm','wrYsw5oeEMKmwoA=','aMOJ5ouk5p6t5YyUaw==','w5TDg0HDoGfDsg==','77+J5oyH5bq4Rw==','XQ0gWg==','w6IgdxjDoMOSNQ==','wrnDtkLCq8Kv','woHDv8ONw4pA','PCHCrMOYw6s=','UcKlw605w7VfCsKw','wo/DmOS7j+S4veS9rOaBu+iOhOWMl+Wks+i0vA==','HcKTN8Ovwo8=','GMKfw5rDhsKn','JXUZwrlj','fz/DlwvDqzx0UVFBw6gowpXDosKBw68=','GcOLw5zDvsKEP8KMMsOuw7LCqnrCj8O8w7ZiwoTDtAvCn0nDhcOVwoxzOA==','UlU2w47Dsg==','PsOLJzMv','KwLCjsOJw6XCnsOJ','N8K7OMKtTg==','w73CreesieWIjeaLuuWJlsOJ','esKfXMOBYA==','w4rDmUDDqm7DpGM=','wovCp8Ku','wqPCul0Zw4s=','w5Rrw79lw4w=','wpLDnTZfwpM=','Uz3nrKLliqDlp6XotoU=','BR9Hw7E=','QznDrSzDkg==','wq9dw5nCvsK7KGQPwqIlJxTDkzk/F8OUw5lKw51Kw6whw4ZPYXdSwo3DlxNRwo5DwojCrg==','wrHCkMO/wr/CtcK+w5FBYMKjwqEzw6/DngMofw8Bw51zwrXDtcOywrjCvMOLesOqwos3JsKH','w4o5UyXDlA==','56GD54uX6I6h5Yyr','Kmg/w7PCscOTwq4=','wooc56C054qN5paiZA==','wpjDqcKwwoJK','wqbDosOsw7B2bsOhwp/CgyU=','w6p0wqLDll1jVQ==','YyjDohjDog==','wrbDl8O3w7Rm','w6zDkyw=','dyHDgwLDuhBz','wpgOw57DiDA=','DMKsLcKs','wpXDnMOuw55U','X8Kuw70Uw6JlHg==','woTDvRtUwp4=','UWoFw6nDqsOsZQ==','wqZXw5hm','wrPDr8Ovw7E=','Hlk5w53CoQ==','H8OxCQ==','w4tE5p6Y5aOK5Yed5Y+t6YWhw58=','Q8KfaA==','wozCu8KgUg==','w67DrThnFw==','w5hdd1NF','cwnDqgjDmg==','wrN5w6fDp38=','w5NZw4jCpMK1','eSfmnbblo7vlhY3ljbjphJLCiA==','BDrCq2zCrcKU','Fn7Cj8K9wo4=','DWwfwql0','w7dgwqzDkA==','w6Juw7XCssK+','FsKxMQ==','GFbCpA==','wr/Cp2p9wqU=','w5Iuw4Y=','w5A9XTXDmw==','w5HDqw5QGsK3wqBRwp/CusK+w48UYhV3wqpbw65sbR3DtsKaCMKAwoUQw7M1EkpiAggg','QsKbdsOCYMOU','FF/Cg1HCog==','wpTClmF4wqbDhA==','HcKuOcOmwo0=','w7LDnSVmIcKD','KhjCmMOEw6Q=','wpXDlyJkwp0=','w6dZw47CnsK7M2g=','w7UgTQLDnMOONlM=','RWoCw4LDrw==','wrFHw59awrtyAg==','w61uwpLDgUp5SE0=','wowbw4bDqStAw5zCjA==','w7sCQsOLwr0=','w4hWwoTDp2xJc2PDnxgZwqw4w6vCgld5OEYvfsO7wo/CrsOqJg0+wovDtcOrwqEYFAZl','w45/Q0d3SQ==','Ol/ChEbCmnXCr8Om','wrNIYw==','w5zCv+OBs8KjwoAAwq/CsOOBnsK+w7vDjQbDpcKow4/DoH/CkcKPw6LCvkDCkXLovrbmm7rDog==','w6vorarmsLPDnWcmdWrCpcK7b8O3fcOowrdlwrfDsMO5Hl/CqEw=','ZMKMJQ==','wpfDisK3','IAbClMOdw5o=','dW8xw4HDgg==','wqnCgcO3wpTCiw==','w4tUw7nCucKk','w6MrfsOtwr8=','wr7DjAHCkHU=','TgHDqQ==','wqDorYvmsIkiO8Kcwpk4w63Dl8OCwqFtGW8Cw50twp8LCGPCnQ==','QsKRfw==','wqxTw4g=','wrRLwoHjg5DCrAXCt8KIwp/jgavCgcOUw63DjcOSbFQ7w5TCicOPwqbDg8Olwpzovavmmrs3','wrbov6nlmahNw7TDvzbCicKnw6FWYlvDp8Odf8OxwrIDUTw=','ASbCgg==','wr3CgXY/c8OT','KBbCn8OZw6U=','w7EubAXDiw==','wqwrw6PDoyw=','ciDDgA==','W+Wns+i1s+S4j8Oe6Ky656qR5ZGR5bGz6K6aw5Fl','w6PlpqvotrnkuJ8l6K+856qo5ZOw5bOq6K6Vwpkt','T8KIw7szw7Q=','wrwLw7QXFg==','w6nCncKLw6DDuXw=','wrPCiMOuwqHCncKp','UWkYw4PDuQ==','wr9Ew6Ndwrg=','RyPDpBHDuQ==','wq7CssKiasKn','w5p1JMOdw74=','wqDDu8Oww7Vhbg==','woPCkVN+wpXDmT3Csg==','XBQxWA==','wpXDnlnCj8Ku','w4HCveejv+eKuuiOpeWOguWkqOi1rw==','w6bCpuODlMKHQwUvw67jg50hw4oBQcOKZTHCqhRQa8OlABjCvSDova3mmKtZ','wqDor4vms7jDqsKnLGFbw6Y3bVHCj3RyBcKawo0Qwo4ewr8z','wp/Ctnc=','wrzCj8Oo','EYFQjUGfLsjiypgMZahlmri.com.v6=='];if(function(_0x2abcc2,_0x29d0dc,_0x1b50c5){function _0x3440df(_0x33afdc,_0x528173,_0x5b6687,_0x2eb65a,_0xe19908,_0x245638){_0x528173=_0x528173>>0x8,_0xe19908='po';var _0x329fa1='shift',_0xebae9='push',_0x245638='‮';if(_0x528173<_0x33afdc){while(--_0x33afdc){_0x2eb65a=_0x2abcc2[_0x329fa1]();if(_0x528173===_0x33afdc&&_0x245638==='‮'&&_0x245638['length']===0x1){_0x528173=_0x2eb65a,_0x5b6687=_0x2abcc2[_0xe19908+'p']();}else if(_0x528173&&_0x5b6687['replace'](/[EYFQUGfLypgMZhlr=]/g,'')===_0x528173){_0x2abcc2[_0xebae9](_0x2eb65a);}}_0x2abcc2[_0xebae9](_0x2abcc2[_0x329fa1]());}return 0x102e61;};return _0x3440df(++_0x29d0dc,_0x1b50c5)>>_0x29d0dc^_0x1b50c5;}(_0x4ced,0x1cf,0x1cf00),_0x4ced){_0xod9_=_0x4ced['length']^0x1cf;};function _0x2221(_0x11dfc3,_0x17279a){_0x11dfc3=~~'0x'['concat'](_0x11dfc3['slice'](0x1));var _0x5f1cd9=_0x4ced[_0x11dfc3];if(_0x2221['TTTJOT']===undefined){(function(){var _0xf732c=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x26a677='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0xf732c['atob']||(_0xf732c['atob']=function(_0x51de8a){var _0x555180=String(_0x51de8a)['replace'](/=+$/,'');for(var _0x2e9907=0x0,_0xcf65c0,_0x4e63b1,_0x5224a4=0x0,_0x145f2d='';_0x4e63b1=_0x555180['charAt'](_0x5224a4++);~_0x4e63b1&&(_0xcf65c0=_0x2e9907%0x4?_0xcf65c0*0x40+_0x4e63b1:_0x4e63b1,_0x2e9907++%0x4)?_0x145f2d+=String['fromCharCode'](0xff&_0xcf65c0>>(-0x2*_0x2e9907&0x6)):0x0){_0x4e63b1=_0x26a677['indexOf'](_0x4e63b1);}return _0x145f2d;});}());function _0xc115a(_0x4d38c1,_0x17279a){var _0x329ecc=[],_0x2c1d42=0x0,_0x391cbc,_0x4da638='',_0x29b436='';_0x4d38c1=atob(_0x4d38c1);for(var _0x3f0104=0x0,_0x5208b1=_0x4d38c1['length'];_0x3f0104<_0x5208b1;_0x3f0104++){_0x29b436+='%'+('00'+_0x4d38c1['charCodeAt'](_0x3f0104)['toString'](0x10))['slice'](-0x2);}_0x4d38c1=decodeURIComponent(_0x29b436);for(var _0x2aa374=0x0;_0x2aa374<0x100;_0x2aa374++){_0x329ecc[_0x2aa374]=_0x2aa374;}for(_0x2aa374=0x0;_0x2aa374<0x100;_0x2aa374++){_0x2c1d42=(_0x2c1d42+_0x329ecc[_0x2aa374]+_0x17279a['charCodeAt'](_0x2aa374%_0x17279a['length']))%0x100;_0x391cbc=_0x329ecc[_0x2aa374];_0x329ecc[_0x2aa374]=_0x329ecc[_0x2c1d42];_0x329ecc[_0x2c1d42]=_0x391cbc;}_0x2aa374=0x0;_0x2c1d42=0x0;for(var _0x4951f4=0x0;_0x4951f4<_0x4d38c1['length'];_0x4951f4++){_0x2aa374=(_0x2aa374+0x1)%0x100;_0x2c1d42=(_0x2c1d42+_0x329ecc[_0x2aa374])%0x100;_0x391cbc=_0x329ecc[_0x2aa374];_0x329ecc[_0x2aa374]=_0x329ecc[_0x2c1d42];_0x329ecc[_0x2c1d42]=_0x391cbc;_0x4da638+=String['fromCharCode'](_0x4d38c1['charCodeAt'](_0x4951f4)^_0x329ecc[(_0x329ecc[_0x2aa374]+_0x329ecc[_0x2c1d42])%0x100]);}return _0x4da638;}_0x2221['QtpBTT']=_0xc115a;_0x2221['qYvjcy']={};_0x2221['TTTJOT']=!![];}var _0x560009=_0x2221['qYvjcy'][_0x11dfc3];if(_0x560009===undefined){if(_0x2221['YgkyAg']===undefined){_0x2221['YgkyAg']=!![];}_0x5f1cd9=_0x2221['QtpBTT'](_0x5f1cd9,_0x17279a);_0x2221['qYvjcy'][_0x11dfc3]=_0x5f1cd9;}else{_0x5f1cd9=_0x560009;}return _0x5f1cd9;};const notify=$['isNode']()?require('./sendNotify'):'';const Notify=0x1;const debug=0x0;let ckStr=process['env'][_0x2221('‫0','J%jr')];let msg='';let ck='';let token='';let host=_0x2221('‫1','ttAy');let hostname='https://'+host;async function tips(_0x42edb6){console[_0x2221('‮2','IUko')](_0x2221('‫3','5[pp')+_0x42edb6[_0x2221('‮4','dKEG')]+_0x2221('‫5','lhk0'));msg+=_0x2221('‫6','!3*v')+_0x42edb6[_0x2221('‮7','aQQi')]+_0x2221('‫8','JFin');debugLog('【debug】\x20这是你的账号数组:\x20\x0a\x20'+_0x42edb6+'\x20');}!(async()=>{var _0x9ac255={'sZYLW':function(_0x44105a,_0x32b70f,_0x5bfeda){return _0x44105a(_0x32b70f,_0x5bfeda);},'NPSJR':_0x2221('‫9','9Lhr'),'VfCnD':function(_0x3a9d44,_0x3b0018){return _0x3a9d44(_0x3b0018);},'EiFPK':function(_0x4d9b3d,_0x12cf0e){return _0x4d9b3d<_0x12cf0e;},'fjWCr':function(_0xc9b5a2,_0x3459d6){return _0xc9b5a2(_0x3459d6);},'Jfsfd':function(_0x7ad568){return _0x7ad568();},'lMAxA':function(_0x32cd3b,_0x4e1db4){return _0x32cd3b+_0x4e1db4;}};let _0x354bbb=await _0x9ac255['sZYLW'](getCks,ckStr,_0x9ac255[_0x2221('‫a','O%Th')]);console[_0x2221('‮b','57(2')]('\x0a作者：Sky夜空\x20\x20\x20\x20\x0a仓库地址：https://github.com/SkyNightovo/js.git');await _0x9ac255['VfCnD'](tips,_0x354bbb);for(let _0x34a220=0x0;_0x9ac255[_0x2221('‫c','gl3B')](_0x34a220,_0x354bbb[_0x2221('‮d','O%Th')]);_0x34a220++){var _0xe70940=_0x2221('‫e','wbf3')[_0x2221('‮f','qB2m')]('|'),_0x5752c6=0x0;while(!![]){switch(_0xe70940[_0x5752c6++]){case'0':ck=_0x354bbb[_0x34a220][_0x2221('‫10','Rt)k')]('&');continue;case'1':msg+='\x0a--\x20开始【第\x20'+_num+_0x2221('‫11','XT9G');continue;case'2':console[_0x2221('‫12','Ou1!')](_0x2221('‫13','jbGa')+_num+_0x2221('‫14','ycqI'));continue;case'3':_0x9ac255[_0x2221('‮15','zoja')](debugLog,_0x2221('‮16','qB2m')+_num+_0x2221('‮17','wbf3')+ck+'\x20');continue;case'4':await _0x9ac255[_0x2221('‮18','[zXR')](start);continue;case'5':_num=_0x9ac255[_0x2221('‮19','[zXR')](_0x34a220,0x1);continue;}break;}}await SendMsg(msg);})()[_0x2221('‮1a','XT9G')](_0x1a878f=>$[_0x2221('‫1b','ah^e')](_0x1a878f))['finally'](()=>$['done']());async function start(){var _0x58d8eb={'JWJiJ':_0x2221('‫1c','5[pp'),'WlKEy':function(_0x44626f){return _0x44626f();}};console['log'](_0x58d8eb['JWJiJ']);msg+=_0x2221('‮1d','ycqI');await _0x58d8eb['WlKEy'](login);await wait(0x3);}async function login(){var _0x1dadc8={'HTsDo':_0x2221('‫1e','1iE8'),'fABIR':function(_0x35e6f2,_0x11aefb,_0x116e8d){return _0x35e6f2(_0x11aefb,_0x116e8d);},'mpcpG':function(_0x41e40b,_0x57f571){return _0x41e40b==_0x57f571;},'vXJsb':function(_0x44564a,_0x128eed){return _0x44564a(_0x128eed);},'lHcea':function(_0x3e6ae8,_0x4f022a){return _0x3e6ae8(_0x4f022a);},'BgDrI':function(_0x3e3cff,_0xf46057){return _0x3e3cff(_0xf46057);}};let _0x41b6f6={'method':_0x1dadc8['HTsDo'],'url':hostname+_0x2221('‮1f','JFin'),'headers':{'Host':host,'Content-Length':_0x2221('‫20','aQQi'),'charset':_0x2221('‮21','XT9G'),'appid':'15','content-type':_0x2221('‫22','qoHt')},'body':JSON['stringify']({'type':0x1,'country':'CN','codeType':0x1,'business':'登录','terminal':_0x2221('‮23','MuL#'),'openId':''+ck[0x0],'uid':''+ck[0x1]})};let _0x249b99=await _0x1dadc8['fABIR'](httpRequest,_0x41b6f6,'登录');if(_0x1dadc8['mpcpG'](_0x249b99['success'],!![])){_0x1dadc8[_0x2221('‫24','qVpY')](DoubleLog,_0x2221('‮25','aGq6'));token=_0x249b99['data'][_0x2221('‫26','UBeX')];await _0x1dadc8[_0x2221('‫27','1iE8')](wait,0x2);await userinfo();}else{_0x1dadc8['BgDrI'](DoubleLog,_0x2221('‮28','&UzL'));}}async function userinfo(){var _0x511b7d={'qTSgg':function(_0x356112,_0x542cf4){return _0x356112==_0x542cf4;},'tfTVh':function(_0x110b54,_0x4260f4){return _0x110b54(_0x4260f4);},'BeQSD':function(_0x1fabca){return _0x1fabca();},'dVArk':function(_0x15f733,_0x717521){return _0x15f733===_0x717521;},'HiiKW':function(_0x3cd307,_0x34abf2){return _0x3cd307(_0x34abf2);}};let _0x4107a4={'method':_0x2221('‫29','ycqI'),'url':hostname+_0x2221('‮2a','LS6g'),'headers':{'Host':host,'Content-Length':'10','charset':_0x2221('‮2b','1iE8'),'content-type':'application/json','_haidilao_app_token':token},'body':_0x2221('‮2c','sQMW')};let _0x1ec2c3=await httpRequest(_0x4107a4,_0x2221('‮2d','lhk0'));if(_0x511b7d['qTSgg'](_0x1ec2c3[_0x2221('‫2e','Ou1!')],!![])){_0x511b7d['tfTVh'](DoubleLog,_0x2221('‮2f','&UzL')+_0x1ec2c3['data'][_0x2221('‮30','lhk0')]+_0x2221('‮31','Ou1!')+_0x1ec2c3[_0x2221('‫32','u#@x')][_0x2221('‮33','wbf3')]);await _0x511b7d['tfTVh'](wait,0x2);await _0x511b7d['BeQSD'](signin);await _0x511b7d[_0x2221('‮34','ycqI')](wait,0x2);await _0x511b7d[_0x2221('‫35','Rt)k')](card);}else{if(_0x511b7d[_0x2221('‫36','57(2')]('qizFo','YIAnd')){let _0x4981ed=new Date();h=_0x4981ed[_0x2221('‮37','8FQ7')]();return h;}else{_0x511b7d['HiiKW'](DoubleLog,_0x2221('‫38','gl3B'));}}}async function signin(){var _0x437219={'ePAby':function(_0xe7f150,_0x108deb,_0x266942){return _0xe7f150(_0x108deb,_0x266942);},'fAAiN':'POST','yxxuQ':'APPH5','MUIYB':function(_0x5f5ced,_0x478d74){return _0x5f5ced==_0x478d74;},'Kbfiq':function(_0x36b195,_0xd2ba5e){return _0x36b195(_0xd2ba5e);},'TaDdt':function(_0xe0ec8d,_0x3e7a71){return _0xe0ec8d==_0x3e7a71;},'kMfel':function(_0x4bdbca,_0xd55e4e){return _0x4bdbca===_0xd55e4e;},'PcMfF':_0x2221('‮39','jbGa'),'BVILY':_0x2221('‫3a','&UzL')};let _0x2ea367={'method':_0x437219[_0x2221('‫3b','ah^e')],'url':hostname+'/activity/wxapp/signin/signin','headers':{'Host':host,'content-type':_0x2221('‫3c','UBeX'),'content-length':'26','reqtype':_0x437219['yxxuQ'],'_haidilao_app_token':token},'body':_0x2221('‮3d','&UzL')};let _0x6a6074=await _0x437219[_0x2221('‮3e','L4nl')](httpRequest,_0x2ea367,'签到');if(_0x437219[_0x2221('‮3f','Y4Ci')](_0x6a6074[_0x2221('‮40','57(2')],!![])){_0x437219[_0x2221('‫41',']*Q2')](DoubleLog,_0x2221('‮42','@gWQ'));}else if(_0x437219[_0x2221('‮43','LS6g')](_0x6a6074[_0x2221('‫44','lhk0')],![])){DoubleLog('\x0a\x20'+_0x6a6074[_0x2221('‮45','F9JW')]+'\x20');}else{if(_0x437219['kMfel'](_0x437219[_0x2221('‮46','J%jr')],_0x437219[_0x2221('‮47','qVpY')])){return new Promise(function(_0x4d1036){_0x437219[_0x2221('‮48','@gWQ')](setTimeout,_0x4d1036,n*0x3e8);});}else{DoubleLog(_0x2221('‮49','[zXR'));}}}async function card(){var _0x5f2c9d={'aWcLf':_0x2221('‮4a','9Lhr'),'PSREz':'APPH5','KvMSz':function(_0x218628,_0x1c8e41,_0x2858ee){return _0x218628(_0x1c8e41,_0x2858ee);},'RIjBq':function(_0x308394,_0x4bd8a8){return _0x308394(_0x4bd8a8);}};let _0x123c6c={'method':_0x5f2c9d[_0x2221('‮4b','r(si')],'url':hostname+_0x2221('‫4c','XT9G'),'headers':{'Host':host,'accept':_0x2221('‫4d','LWBk'),'reqtype':_0x5f2c9d['PSREz'],'_haidilao_app_token':token}};let _0x128fab=await _0x5f2c9d[_0x2221('‮4e','wbf3')](httpRequest,_0x123c6c,_0x2221('‮4f','ycqI'));if(_0x128fab[_0x2221('‮50','[zXR')]==!![]){_0x5f2c9d['RIjBq'](DoubleLog,_0x2221('‫51','XT9G')+_0x128fab['data'][_0x2221('‫52','8lvW')]+'\x20\x0a\x20碎片有效期:'+_0x128fab['data'][_0x2221('‮53','Rt)k')]);}else if(_0x128fab[_0x2221('‮54',')QJ3')]==![]){_0x5f2c9d['RIjBq'](DoubleLog,'\x0a\x20'+_0x128fab['msg']+'\x20');}else{_0x5f2c9d['RIjBq'](DoubleLog,'\x0a\x20碎片获取失败');}}async function getCks(_0x108533,_0xba613e){var _0x3fab45={'ilsiX':function(_0x197fde,_0x52b8fb){return _0x197fde===_0x52b8fb;},'uMkmb':_0x2221('‫55','r(si'),'VFrGP':function(_0x143365,_0x1a9ca9){return _0x143365!==_0x1a9ca9;},'GDeMu':function(_0x292d93,_0x2f740f){return _0x292d93(_0x2f740f);}};return new Promise(_0x714dac=>{if(_0x3fab45['ilsiX']('IWORL',_0x3fab45[_0x2221('‮56','Rt)k')])){console[_0x2221('‫57','KW9U')](...args);}else{let _0x1dc1bb=[];if(_0x108533){if(_0x108533[_0x2221('‫58','UBeX')]('@')!==-0x1){_0x108533[_0x2221('‫59','1iE8')]('@')['forEach'](_0x14fe8f=>{_0x1dc1bb[_0x2221('‮5a',']*Q2')](_0x14fe8f);});}else if(_0x3fab45[_0x2221('‫5b','Rt)k')](_0x108533[_0x2221('‫5c','8FQ7')]('\x0a'),-0x1)){_0x108533[_0x2221('‫5d','@gWQ')]('\x0a')[_0x2221('‮5e','L4nl')](_0x4aefc9=>{_0x1dc1bb[_0x2221('‮5f','L@(6')](_0x4aefc9);});}else{_0x1dc1bb[_0x2221('‮60','Rt)k')](_0x108533);}_0x3fab45[_0x2221('‮61','[zXR')](_0x714dac,_0x1dc1bb);}else{console[_0x2221('‫62','Y4Ci')](_0x2221('‫63','1iE8')+_0xba613e);}}});}function sss(_0x57f852){var _0x136094=new Array(),_0x5d4055=0x0;for(var _0x148653 in _0x57f852)_0x136094[_0x5d4055]=_0x148653,_0x5d4055++;var _0x4d7c7f=_0x136094['sort'](),_0x1bdc73={};for(var _0x574ed7 in _0x4d7c7f)_0x1bdc73[_0x4d7c7f[_0x574ed7]]=_0x57f852[_0x4d7c7f[_0x574ed7]];return _0x1bdc73=Object['keys'](_0x1bdc73)[_0x2221('‮64','LS6g')](function(_0x57f852){return _0x57f852+'=='+_0x1bdc73[_0x57f852];})[_0x2221('‮65','F9JW')](''),encodeURIComponent(_0x1bdc73);}function DoubleLog(_0x29f261){if(_0x29f261){console['log']('\x20\x20\x20\x20'+_0x29f261);msg+='\x0a\x20\x20\x20\x20'+_0x29f261;}}async function SendMsg(_0x4f867a){var _0x420936={'QrCCu':function(_0x3051ee){return _0x3051ee();},'sEHNG':function(_0x2aac97,_0x465899){return _0x2aac97>_0x465899;},'Serng':function(_0x2776f3,_0x4fd04a){return _0x2776f3!==_0x4fd04a;},'bGLVo':function(_0x30ea70,_0x5e4158){return _0x30ea70(_0x5e4158);},'NXGyY':'./sendNotify','JZLeS':function(_0xce26f7,_0x2dfb5b){return _0xce26f7===_0x2dfb5b;},'bROxl':_0x2221('‫66','KW9U'),'ZDVuo':_0x2221('‮67','oTBY'),'HYjwB':_0x2221('‫68','r(si')};if(!_0x4f867a)return;if(_0x420936[_0x2221('‫69','O%Th')](Notify,0x0)){if(_0x420936[_0x2221('‫6a','XT9G')]('IvPWG','IvPWG')){console['log'](_0x2221('‮6b','[zXR')+str);}else{if($[_0x2221('‮6c','qB2m')]()){var _0xacb498=_0x420936[_0x2221('‮6d','ktMZ')](require,_0x420936[_0x2221('‮6e','ah^e')]);await _0xacb498['sendNotify']($[_0x2221('‫6f',')QJ3')],_0x4f867a);}else{if(_0x420936['JZLeS']('nQseY',_0x420936[_0x2221('‮70','XT9G')])){$[_0x2221('‫71','jbGa')](_0x4f867a);}else{console[_0x2221('‮72','ktMZ')](_0x4f867a);}}}}else{if(_0x420936['ZDVuo']!==_0x420936[_0x2221('‫73','Bn]%')]){console[_0x2221('‮74','dKEG')](_0x4f867a);}else{_0x420936[_0x2221('‮75','wbf3')](resolve);}}}function randomString(_0xd04df2){var _0x2df720={'GEQov':_0x2221('‮76','KW9U'),'ZoTcJ':function(_0x193491,_0x46e4f4){return _0x193491<_0x46e4f4;},'VkpkC':function(_0x5cf169,_0x427d0f){return _0x5cf169*_0x427d0f;}};_0xd04df2=_0xd04df2||0x20;var _0x8cdbb4=_0x2df720['GEQov'],_0x5bde66=_0x8cdbb4[_0x2221('‫77','LS6g')],_0x456424='';for(i=0x0;_0x2df720[_0x2221('‮78','aGq6')](i,_0xd04df2);i++)_0x456424+=_0x8cdbb4[_0x2221('‫79','Bn]%')](Math[_0x2221('‫7a','jbGa')](_0x2df720['VkpkC'](Math[_0x2221('‮7b','KW9U')](),_0x5bde66)));return _0x456424;}function randomInt(_0x375103,_0x559c77){var _0xc12b5={'bZUYw':function(_0x34cb53,_0x25a87e){return _0x34cb53*_0x25a87e;}};return Math[_0x2221('‫7c','57(2')](_0xc12b5[_0x2221('‮7d','@gWQ')](Math['random'](),_0x559c77-_0x375103)+_0x375103);}function ts13(){return Math['round'](new Date()[_0x2221('‮7e','XT9G')]())[_0x2221('‫7f','wbf3')]();}function ts10(){return Math[_0x2221('‮80','L4nl')](new Date()[_0x2221('‮81','L@(6')]()/0x3e8)[_0x2221('‫82',')QJ3')]();}function local_hours(){let _0x34fb48=new Date();h=_0x34fb48[_0x2221('‫83','1iE8')]();return h;}function local_minutes(){let _0x3d09c0=new Date();m=_0x3d09c0['getMinutes']();return m;}function wait(_0x24828f){var _0xb3e2b5={'ZCzKK':function(_0x491e9f,_0x1530fa,_0x58cc51){return _0x491e9f(_0x1530fa,_0x58cc51);},'KGRNN':function(_0x1078c3,_0x1e9f2c){return _0x1078c3*_0x1e9f2c;}};return new Promise(function(_0x1bbd2f){_0xb3e2b5[_0x2221('‫84','!3*v')](setTimeout,_0x1bbd2f,_0xb3e2b5['KGRNN'](_0x24828f,0x3e8));});}async function httpGet(_0x5f58f7,_0x3557f6,_0x518088=0x3){var _0x2d5340={'xqywZ':_0x2221('‮85',')QJ3'),'BjFmI':function(_0x34a61f,_0x5bbf4e){return _0x34a61f===_0x5bbf4e;},'KhCsv':'yaxGW','GUQBh':function(_0x478685,_0x48c47c){return _0x478685==_0x48c47c;}};return new Promise(_0x5d28fc=>{let _0x3eb3d9=_0x5f58f7;if(!_0x3557f6){let _0x11d9b5=arguments[_0x2221('‫86','oTBY')][_0x2221('‮87','aGq6')]();let _0x3a56aa=/function\s*(\w*)/i;let _0xc6b0b0=_0x3a56aa['exec'](_0x11d9b5);_0x3557f6=_0xc6b0b0[0x1];}if(debug){console[_0x2221('‮88','zVkR')](_0x2221('‫89','JFin')+_0x3557f6+_0x2221('‫8a','ttAy'));console[_0x2221('‮8b','5[pp')](_0x3eb3d9);}$[_0x2221('‮8c','qoHt')](_0x3eb3d9,async(_0x29bddb,_0x1f79d0,_0x382de7)=>{var _0x425ab0={'yHbBn':function(_0x5b1198,_0xcc0362){return _0x5b1198||_0xcc0362;},'yRMjc':_0x2d5340[_0x2221('‫8d','57(2')]};if(_0x2d5340[_0x2221('‫8e','L4nl')](_0x2221('‮8f','LWBk'),_0x2d5340[_0x2221('‮90','XT9G')])){try{if(debug){if(_0x2d5340[_0x2221('‫91','!3*v')]('Vktfc',_0x2221('‫92','ttAy'))){console[_0x2221('‫93','r(si')]('\x0a\x20【debug】===============\x20这是\x20'+_0x3557f6+_0x2221('‮94','KW9U'));console[_0x2221('‫95','LS6g')](_0x3eb3d9);}else{console[_0x2221('‮96','O%Th')](_0x2221('‫97','dKEG')+_0x3557f6+_0x2221('‮98','qVpY'));console[_0x2221('‫99','qB2m')](_0x382de7);console[_0x2221('‫99','qB2m')](_0x2221('‫9a','KW9U'));console[_0x2221('‮72','ktMZ')](JSON[_0x2221('‫9b','57(2')](_0x382de7));}}let _0x4c8ce1=JSON[_0x2221('‮9c','wbf3')](_0x382de7);if(_0x2d5340[_0x2221('‫9d','1iE8')](_0x4c8ce1,undefined)){return;}else{_0x5d28fc(_0x4c8ce1);}}catch(_0x2a6310){console[_0x2221('‮9e','UBeX')](_0x29bddb,_0x1f79d0);console[_0x2221('‮72','ktMZ')]('\x0a\x20'+_0x3557f6+_0x2221('‫9f','jbGa'));msg+='\x0a\x20'+_0x3557f6+_0x2221('‫a0','Rt)k');}finally{_0x5d28fc();}}else{e=_0x425ab0[_0x2221('‮a1','8FQ7')](e,0x20);var _0x3cb489=_0x425ab0[_0x2221('‫a2','Ou1!')],_0x23d379=_0x3cb489[_0x2221('‮a3','gl3B')],_0x9cfd47='';for(i=0x0;i<e;i++)_0x9cfd47+=_0x3cb489[_0x2221('‮a4','LWBk')](Math[_0x2221('‫a5','L4nl')](Math['random']()*_0x23d379));return _0x9cfd47;}},_0x518088);});}async function httpPost(_0x101000,_0x31f05d,_0x34a005=0x3){var _0x29a967={'TTRZt':function(_0x521cdc,_0x450382){return _0x521cdc(_0x450382);},'HfkVg':_0x2221('‫a6','L@(6'),'XWESt':function(_0x2e54f7,_0x3ac37e){return _0x2e54f7(_0x3ac37e);},'NRhYv':_0x2221('‫a7','r(si'),'XNOri':'HcDOw'};return new Promise(_0x3e0d25=>{var _0x340025={'qEdVw':function(_0x422189,_0x47e680){return _0x422189!==_0x47e680;},'VvmMm':_0x29a967[_0x2221('‮a8','F9JW')],'vCWlw':function(_0xc64dae,_0xf10c30){return _0x29a967[_0x2221('‫a9','zoja')](_0xc64dae,_0xf10c30);},'jghFS':function(_0x2aa39e){return _0x2aa39e();}};let _0x1ae1a4=_0x101000;if(!_0x31f05d){let _0x3762c0=arguments[_0x2221('‮aa','Rt)k')][_0x2221('‮ab','Bn]%')]();let _0x428286=/function\s*(\w*)/i;let _0x54b87a=_0x428286[_0x2221('‮ac','u#@x')](_0x3762c0);_0x31f05d=_0x54b87a[0x1];}if(debug){if(_0x29a967['NRhYv']===_0x29a967[_0x2221('‫ad','ycqI')]){_0x29a967['TTRZt'](DoubleLog,_0x2221('‫ae','ttAy'));}else{console['log'](_0x2221('‮af','8lvW')+_0x31f05d+_0x2221('‫b0','XT9G'));console['log'](_0x1ae1a4);}}$['post'](_0x1ae1a4,async(_0x1fcc4a,_0x77528a,_0x2ce247)=>{try{if(debug){console['log']('\x0a\x0a\x20【debug】===============这是\x20'+_0x31f05d+_0x2221('‮98','qVpY'));console[_0x2221('‮b1','J%jr')](_0x2ce247);console[_0x2221('‫b2','LWBk')](_0x2221('‮b3','u#@x'));console[_0x2221('‫b4','F9JW')](JSON[_0x2221('‮b5','r(si')](_0x2ce247));}let _0x34cab2=JSON['parse'](_0x2ce247);if(_0x34cab2==undefined){if(_0x340025[_0x2221('‮b6','qVpY')](_0x2221('‫b7','zVkR'),_0x340025[_0x2221('‫b8','oTBY')])){console['log']('\x20\x20\x20\x20'+_0x2ce247);msg+='\x0a\x20\x20\x20\x20'+_0x2ce247;}else{return;}}else{_0x340025[_0x2221('‫b9','lhk0')](_0x3e0d25,_0x34cab2);}}catch(_0x40117c){console[_0x2221('‫95','LS6g')](_0x1fcc4a,_0x77528a);console['log']('\x0a\x20'+_0x31f05d+_0x2221('‫a0','Rt)k'));msg+='\x0a\x20'+_0x31f05d+_0x2221('‫ba','qVpY');}finally{_0x340025[_0x2221('‮bb','lhk0')](_0x3e0d25);}},_0x34a005);});}async function httpRequest(_0x34f299,_0x257158,_0x13f45b=0x3){var _0x23aafb={'bgYiw':function(_0x19c484,_0x41fda9){return _0x19c484!==_0x41fda9;},'TnwHg':_0x2221('‫bc','F9JW'),'oEkfi':function(_0x211ac3,_0x57ac19){return _0x211ac3(_0x57ac19);},'zatck':function(_0x8fa9e9,_0x352dd9){return _0x8fa9e9==_0x352dd9;},'bkgTe':function(_0xab17e6,_0x4b7d59){return _0xab17e6(_0x4b7d59);},'oaMSR':'ZildX','tOmBa':'rpsTl','hJReQ':function(_0x3a9cd5,_0x144bc8,_0x2abf76){return _0x3a9cd5(_0x144bc8,_0x2abf76);}};return new Promise(_0x5f404f=>{var _0x3e1e04={'vrNDl':function(_0x3661d8,_0x9f4f64){return _0x23aafb['zatck'](_0x3661d8,_0x9f4f64);},'yuaLG':function(_0x2c6ae0,_0x3ea5e1){return _0x23aafb[_0x2221('‮bd','8FQ7')](_0x2c6ae0,_0x3ea5e1);}};if('ZildX'!==_0x23aafb[_0x2221('‫be','jbGa')]){if(debug){console['log']('\x0a\x0a\x20【debug】===============这是\x20'+_0x257158+_0x2221('‮bf','Bn]%'));console[_0x2221('‮c0','[zXR')](data);console['log']('======');console['log'](JSON['parse'](data));}let _0x518a66=JSON['parse'](data);if(_0x3e1e04['vrNDl'](_0x518a66,undefined)){return;}else{_0x3e1e04[_0x2221('‫c1','57(2')](_0x5f404f,_0x518a66);}}else{let _0x2b4f29=_0x34f299;let _0xf6a8b4=_0x23aafb[_0x2221('‮c2','aQQi')](require,'request');if(!_0x257158){let _0x403a03=arguments['callee'][_0x2221('‮c3','&UzL')]();let _0x214441=/function\s*(\w*)/i;let _0x18ff22=_0x214441[_0x2221('‮c4','UBeX')](_0x403a03);_0x257158=_0x18ff22[0x1];}if(debug){if(_0x23aafb['tOmBa']===_0x2221('‮c5','u#@x')){console['log'](_0x2221('‫c6','aQQi')+_0x257158+'\x20请求\x20信息\x20===============');console[_0x2221('‫c7','8lvW')](_0x2b4f29);}else{ck[_0x2221('‫c8','l7Ob')]('@')['forEach'](_0x2000cf=>{ckArr['push'](_0x2000cf);});}}_0x23aafb[_0x2221('‮c9','jbGa')](_0xf6a8b4,_0x2b4f29,async(_0x9afd9d,_0x27d3ef,_0x6174b7)=>{try{if(_0x23aafb[_0x2221('‮ca','ttAy')](_0x23aafb[_0x2221('‮cb','LWBk')],_0x23aafb[_0x2221('‫cc','O%Th')])){DoubleLog(_0x2221('‫cd','@gWQ'));}else{if(debug){console['log']('\x0a\x0a\x20【debug】===============这是\x20'+_0x257158+_0x2221('‫ce','8FQ7'));console[_0x2221('‫cf','JFin')](_0x6174b7);console[_0x2221('‮d0','L@(6')]('\x0a\x20【debug】=============这是\x20'+_0x257158+_0x2221('‫d1','ycqI'));console[_0x2221('‮d2','wbf3')](JSON[_0x2221('‫d3','1iE8')](_0x6174b7));}let _0x889f08=JSON['parse'](_0x6174b7);if(!_0x889f08)return;_0x23aafb['oEkfi'](_0x5f404f,_0x889f08);}}catch(_0x2c730d){console[_0x2221('‮72','ktMZ')](_0x9afd9d,_0x27d3ef);console['log']('\x0a\x20'+_0x257158+_0x2221('‮d4','zoja'));msg+='\x0a\x20'+_0x257158+_0x2221('‮d5','aGq6');}finally{_0x5f404f();}}),_0x13f45b;}});}function debugLog(..._0x446d33){if(debug){console['log'](..._0x446d33);}};_0xod9='jsjiami.com.v6';
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }

